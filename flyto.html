<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Some places I've been to ...</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>


<style>
#map {
    position: fixed;
    width:100%;
}
#features {
    position: absolute;
    width: 40%;
    margin-left: 58%;
    margin-right: 2%;
    margin-top: 1%;
    font-family: sans-serif;
    overflow-y: scroll;
    background-color: white;
    opacity: 0.8;
}
section {
    padding:  25px 50px;
    line-height: 25px;
    border-bottom: 1px solid #ddd;
    opacity: 0.25;
    font-size: 13px;
}
section.active {
    opacity: 1;
}
section:last-child {
    border-bottom: none;
    margin-bottom: 200px;
}
.gap-80 {
				width:100%;
				height:80px;
			}
</style>

<div id='map'></div>
<div id='features'>
    <section id='talavera' class='active'>
        <h3>Talavera de la Reina</h3>
        <p>The city is settled along the river Tagus (Tajo in Spanish) at a broad bank. There are two islands in the center of the city called Isla Grande and Chamelo Island. 
            The city is surrounded by two ranges of mountains, in the north the Sierra de San Vicente, and in the south Montes de Toledo.</p>
            <p>The city is divided in two by the river Tagus. The northern part is the larger and more populated; both parts are connected by three bridges, one of them built in the Middle Ages.</p>
    </section>
    <section id='mexico_df' class='active'>
        <h3>Mexico Df.</h3>
        <p>Mexico’s capital is both the oldest capital city in the Americas and one of two founded by Native Americans, the other being Quito, Ecuador. 
            The city was originally built on an island of Lake Texcoco by the Aztecs in 1325 as Tenochtitlan, which was almost completely destroyed in the 1521 siege of Tenochtitlan and subsequently redesigned and rebuilt in accordance with the Spanish urban standards.
            In 1524, the municipality of Mexico City was established, known as México Tenochtitlán, and as of 1585, it was officially known as Ciudad de México (Mexico City).
            Mexico City was the political, administrative, and financial center of a major part of the Spanish colonial empire.
            After independence from Spain was achieved, the federal district was created in 1824.</p>
    </section>
    <section id='tallin'>
        <h3>Tallin</h3>
        <p>
            Tallinn, first mentioned in 1219, received city rights in 1248, but the earliest human settlements date back 5,000 years.
            The initial claim over the land was laid by the Danes in 1219, after a successful raid of Lyndanisse led by Valdemar II of Denmark, followed by a period of alternating Scandinavian and German rule.
            Due to its strategic location, the city became a major trade hub, especially from the 14th to the 16th century, when it grew in importance as part of the Hanseatic League.
        d</p>  
        </section>
    <section id='london'>
        <h3>London</h3>
        <p>London is the capital and most populous city of England and the United Kingdom.
            Standing on the River Thames in the south east of the island of Great Britain, London has been a major settlement for two millennia. It was founded by the Romans, who named it Londinium. 
            London's ancient core, the City of London, largely retains its 1.12-square-mile (2.9 km2) medieval boundaries. 
            Since at least the 19th century, "London" has also referred to the metropolis around this core, historically split between Middlesex, Essex, Surrey, Kent and Hertfordshire, which today largely makes up Greater London, a region governed by the Mayor of London and the London Assembly.</p>
    </section>
    <section id='madrid'>
        <h3>Madrid</h3>
        <p>Madrid lies on the River Manzanares in the centre of both the country and the Community of Madrid (which comprises the city of Madrid, its conurbation and extended suburbs and villages); this community is bordered by the autonomous communities of Castile and León and Castile-La Mancha.
            As the capital city of Spain, seat of government, and residence of the Spanish monarch, Madrid is also the political, economic and cultural centre of the country.
            The current mayor is Manuela Carmena from the party Ahora Madrid.</p>
    </section>
    <section id='barcelona'>
        <h3>Barcelona</h3>
        <p> Barcelonais a city in Spain. It is the capital and largest city of Catalonia, as well as the second most populous municipality of Spain.
            With a population of 1.6 million within city limits, its urban area extends to numerous neighbouring municipalities within the Province of Barcelona and is home to around 4.8 million people, making it the sixth most populous urban area in the European Union after Paris, London, Madrid, the Ruhr area and Milan.
            It is the largest metropolis on the Mediterranean Sea, located on the coast between the mouths of the rivers Llobregat and Besòs, and bounded to the west by the Serra de Collserola mountain range, the tallest peak of which is 512 metres (1,680 feet) high.
            Founded as a Roman city, in the Middle Ages Barcelona became the capital of the County of Barcelona. After merging with the Kingdom of Aragon, Barcelona continued to be an important city in the Crown of Aragon as an economic and administrative centre of this Crown and the capital of the Principality of Catalonia. 
            Barcelona has a rich cultural heritage and is today an important cultural centre and a major tourist destination.</p>
        </h3>
    </section>
    <section id='antwerp'>
        <h3>Antwerp</h3>
        <p>
            Antwerp has long been an important city in the Low Countries, both economically and culturally, especially before the Spanish Fury (1576) in the Dutch Revolt. 
            The inhabitants of Antwerp are nicknamed Sinjoren, after the Spanish honorific señor or French seigneur, "lord", referring to the Spanish noblemen who ruled the city in the 17th century.
            Today Antwerp is a major trade and cultural centre, and is the world's second most multi-cultural city (after Amsterdam) home to 170 nationalities.
            It is also known as "the diamond capital of the world" for its large diamond district.
            The city hosted the 1920 Summer Olympics.
        </p>
    </section>

    <section id='toulouse'>
        <h3>Toulouse</h3>
        <p>Toulouse is the centre of the European aerospace industry, with the headquarters of Airbus (formerly EADS), the Galileo positioning system, the SPOT satellite system, ATR and the Aerospace Valley.
            It also hosts the European headquarters of Intel and CNES's Toulouse Space Centre (CST), the largest space centre in Europe.
            Thales Alenia Space, and Astrium Satellites also have a significant presence in Toulouse.
            The University of Toulouse is one of the oldest in Europe (founded in 1229) and, with more than 103,000 students, it is the fourth-largest university campus in France, after the universities of Paris, Lyon and Lille.</p>
    </section>

    <section id='london-ontario'>
        <h3>London Ontario</h3>
        <p>
            London is a regional centre of health care and education, being home to the University of Western Ontario, Fanshawe College, and several hospitals. 
            The city hosts a number of musical and artistic exhibits and festivals, which contribute to its tourism industry, but its economic activity is centred on education, medical research, insurance, and information technology.
            London's university and hospitals are among its top ten employers. 
            London lies at the junction of Highway 401 and 402, connecting it to Toronto, Windsor (which is directly across the border from Detroit), and Sarnia. It also has an international airport, train, and bus station.
        </p>
    </section>

    <section id='saojose'>
        <h3>Sao Jose de Rio Preto</h3>
        <p>
            The city is located at the north/northwest portion of the state, 440 km (273 mi) from the city of São Paulo and 700 km (435 mi) from Brasília. 
            With 408,258 inhabitants (IBGE/2010), is the 12th biggest city of the state and the 52nd biggest in Brazil.
            Founded in 1852, its history is closely linked with trade, the provision of services and agriculture.
            In 1912, the railroad Araraquarense arrived and stopped in the city for 20 years, transforming São José do Rio Preto into the commercial center of the region.
        </p>
        <small id="citation">
            Adapted from <a href='http://www.gutenberg.org/files/2346/2346-h/2346-h.htm'>Project Gutenberg</a>
        </small>
    </section>

    <section>
            <div class="gap-80"></div>
            <div class="gap-80"></div>
    </section>

</div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiamRpZXpwZXJlemoiLCJhIjoiY2plcXUweXlyMW9pZDJxcG1iNTB0c3k4ZyJ9.Hr-fXh_4-zNDrgIFxbjiYg';

var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/dark-v9',
    center: [-4.830454, 39.962884],
    zoom: 15.5,
    bearing: 27,
    pitch: 45
});

var chapters = {
    'talavera': {
        bearing: 27,
        center: [-4.830454, 39.962884],
        zoom: 15.5,
        pitch: 20
    },
    'mexico_df': {
        bearing: 27,
        center: [-99.133208, 19.432608],
        zoom: 15.5,
        pitch: 20
    },
    'tallin': {
        duration: 6000,
        center: [24.753575, 59.436961],
        bearing: 150,
        zoom: 15,
        pitch: 0
    },
    'london': {
        bearing: 90,
        center: [-0.08533793, 51.50438536],
        zoom: 13,
        speed: 0.6,
        pitch: 40
    },
    'madrid': {
        bearing: 90,
        center: [-3.703790, 40.416775],
        zoom: 12.3,
        pitch: 20,
        speed: 0.5
    },
    'barcelona': {
        bearing: 45,
        center: [2.173403, 41.385064],
        zoom: 15.3,
        pitch: 20,
        speed: 0.5
    },
    'antwerp': {
        bearing: 180,
        center: [4.402464, 51.219448],
        zoom: 12.3
    },
    'toulouse': {
        bearing: 90,
        center: [1.444209, 43.604652],
        zoom: 17.3,
        pitch: 40
    },
    'london-ontario': {
        bearing: 90,
        center: [-81.245277, 42.984923],
        zoom: 14.3,
        pitch: 20
    },
    'saojose': {
        bearing: 90,
        center: [-49.376227, -20.811761],
        zoom: 14.3,
        pitch: 20
    }
};

// On every scroll event, check which element is on screen
window.onscroll = function() {
    var chapterNames = Object.keys(chapters);
    for (var i = 0; i < chapterNames.length; i++) {
        var chapterName = chapterNames[i];
        if (isElementOnScreen(chapterName)) {
            setActiveChapter(chapterName);
            break;
        }
    }
};

var activeChapterName = 'talavera';
function setActiveChapter(chapterName) {
    if (chapterName === activeChapterName) return;

    map.flyTo(chapters[chapterName]);

    document.getElementById(chapterName).setAttribute('class', 'active');
    document.getElementById(activeChapterName).setAttribute('class', '');

    activeChapterName = chapterName;
}

function isElementOnScreen(id) {
    var element = document.getElementById(id);
    var bounds = element.getBoundingClientRect();
    return bounds.top < window.innerHeight && bounds.bottom > 0;
}

</script>

</body>
</html>